<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Expanded Game View</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <h1 class="text-2xl font-bold mb-4">Test Expanded Game View</h1>
    
    <div class="mb-4">
        <button onclick="testExpandGameView()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
            Test expandGameView Function
        </button>
    </div>
    
    <div id="console-output" class="bg-white p-4 rounded shadow-md">
        <h2 class="font-bold mb-2">Console Output:</h2>
        <pre id="output" class="text-sm"></pre>
    </div>
    
    <script>
        const output = document.getElementById('output');
        
        function log(message) {
            output.textContent += message + '\n';
            console.log(message);
        }
        
        function testExpandGameView() {
            log('Testing expandGameView function...');
            
            // Check if the function exists
            if (typeof window.expandGameView === 'function') {
                log('✅ expandGameView function exists!');
                log('Function type: ' + typeof window.expandGameView);
            } else {
                log('❌ expandGameView function NOT found!');
                log('window.expandGameView = ' + window.expandGameView);
            }
            
            // Check if collapseGameView exists
            if (typeof window.collapseGameView === 'function') {
                log('✅ collapseGameView function exists!');
            } else {
                log('❌ collapseGameView function NOT found!');
            }
            
            // Check for the expanded view element
            const expandedView = document.getElementById('expanded-game-view');
            if (expandedView) {
                log('✅ expanded-game-view element found!');
                log('Classes: ' + expandedView.className);
            } else {
                log('❌ expanded-game-view element NOT found!');
            }
            
            // Try to call the function (will fail without proper context)
            try {
                log('\nAttempting to call expandGameView...');
                // This will likely fail due to missing dependencies
                window.expandGameView('test-game-1', null);
            } catch (error) {
                log('Error calling expandGameView: ' + error.message);
            }
        }
        
        // Check on page load
        window.addEventListener('load', () => {
            log('Page loaded. Checking for functions...');
            
            // Try to load the main index.html in an iframe to check
            const iframe = document.createElement('iframe');
            iframe.src = '/index.html';
            iframe.style.display = 'none';
            document.body.appendChild(iframe);
            
            iframe.onload = () => {
                log('\nChecking index.html iframe...');
                try {
                    if (iframe.contentWindow.expandGameView) {
                        log('✅ expandGameView found in index.html!');
                    } else {
                        log('❌ expandGameView NOT found in index.html');
                    }
                } catch (e) {
                    log('Cannot access iframe content: ' + e.message);
                }
            };
        });
    </script>
</body>
</html>