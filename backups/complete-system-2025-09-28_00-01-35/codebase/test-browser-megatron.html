<!DOCTYPE html>
<html>
<head>
    <title>MEGATRON Browser Test</title>
</head>
<body>
    <h1>🎯 MEGATRON Browser Test</h1>

    <div>
        <button onclick="testMegatronInBrowser()">🧪 Test MEGATRON Dashboard</button>
        <button onclick="testMegatronCSV()">📊 Test CSV Export</button>
    </div>

    <div id="results" style="margin-top: 20px; white-space: pre-wrap; font-family: monospace;"></div>

    <script>
        function log(message) {
            const results = document.getElementById('results');
            results.textContent += message + '\n';
            console.log(message);
        }

        async function testMegatronInBrowser() {
            log('🎯 Testing MEGATRON batch processing in browser...');

            try {
                // Open admin interface to test
                const adminUrl = 'http://localhost:5002/index.html?view=admin';
                log(`🌐 Opening admin interface: ${adminUrl}`);

                const adminWindow = window.open(adminUrl, '_blank');

                if (adminWindow) {
                    log('✅ Admin interface opened in new tab');
                    log('🎯 Manually test MEGATRON "Refresh Data" button in the admin interface');
                    log('📊 Expected results: 54 total users, 49+ Week 1 picks, no timeouts');
                } else {
                    log('❌ Failed to open admin interface');
                }

            } catch (error) {
                log(`❌ Browser test error: ${error.message}`);
            }
        }

        async function testMegatronCSV() {
            log('📊 Testing CSV export functionality...');

            try {
                const adminUrl = 'http://localhost:5002/index.html?view=admin';
                log(`🌐 Opening admin interface for CSV test: ${adminUrl}`);

                const adminWindow = window.open(adminUrl, '_blank');

                if (adminWindow) {
                    log('✅ Admin interface opened for CSV test');
                    log('🎯 Manually test "Export Survivor Data" button in MEGATRON section');
                    log('📋 Expected CSV format: USERID, EMAIL, NAME, WEEK, TEAM PICKED, etc.');
                } else {
                    log('❌ Failed to open admin interface for CSV test');
                }

            } catch (error) {
                log(`❌ CSV test error: ${error.message}`);
            }
        }

        log('🎯 MEGATRON Browser Test Ready');
        log('Click buttons above to test MEGATRON functionality');
    </script>
</body>
</html>