<!DOCTYPE html>
<html>
<head>
    <title>Firestore Data Test</title>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
        import { getFirestore, doc, getDoc } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyBPbH8xb7PbQKy9LIbAoV4W0j2O6tOZRQo",
            authDomain: "nerdfootball-aa4d0.firebaseapp.com",
            projectId: "nerdfootball-aa4d0",
            storageBucket: "nerdfootball-aa4d0.appspot.com",
            messagingSenderId: "306039020266",
            appId: "1:306039020266:web:b1e2c8a4f5e8b9f1a2b3c4"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.testFirestoreData = async function() {
            console.log('🔍 Testing Firestore game results data structure...');

            // Test Week 2 results
            try {
                const week2Doc = await getDoc(doc(db, 'artifacts/nerdfootball/public/data/nerdfootball_games/2'));
                if (week2Doc.exists()) {
                    console.log('📊 Week 2 Game Results:', JSON.stringify(week2Doc.data(), null, 2));
                } else {
                    console.log('❌ Week 2 results not found');
                }
            } catch (error) {
                console.error('❌ Error fetching Week 2 results:', error);
            }

            // Test user picks
            try {
                const userPicksDoc = await getDoc(doc(db, 'artifacts/nerdfootball/public/data/nerdSurvivor_picks/aaG5Wc2JZkZJD1r7ozfJG04QRrf1'));
                if (userPicksDoc.exists()) {
                    console.log('👤 User aaG5Wc2JZkZJD1r7ozfJG04QRrf1 picks:', JSON.stringify(userPicksDoc.data(), null, 2));
                } else {
                    console.log('❌ User picks not found');
                }
            } catch (error) {
                console.error('❌ Error fetching user picks:', error);
            }

            // Test pool members
            try {
                const poolDoc = await getDoc(doc(db, 'artifacts/nerdfootball/pools/nerduniverse-2025/metadata/members'));
                if (poolDoc.exists()) {
                    console.log('🏊 Pool members:', JSON.stringify(poolDoc.data(), null, 2));
                } else {
                    console.log('❌ Pool members not found');
                }
            } catch (error) {
                console.error('❌ Error fetching pool members:', error);
            }

            // Test survivor status
            try {
                const statusDoc = await getDoc(doc(db, 'artifacts/nerdfootball/public/data/nerdSurvivor_status/status'));
                if (statusDoc.exists()) {
                    console.log('🏆 Survivor status:', JSON.stringify(statusDoc.data(), null, 2));
                } else {
                    console.log('❌ Survivor status not found');
                }
            } catch (error) {
                console.error('❌ Error fetching survivor status:', error);
            }
        };

        // Auto-run on load
        window.onload = () => {
            window.testFirestoreData();
        };
    </script>
</head>
<body>
    <h1>Testing Firestore Data Structure</h1>
    <p>Check browser console for results...</p>
    <button onclick="testFirestoreData()">Run Test Again</button>
</body>
</html>