<!DOCTYPE html>
<html>
<head>
    <title>RTDB Test - No Cache</title>
    <meta name="cache-control" content="no-cache">
    <meta name="version" content="test-1.0">
</head>
<body>
    <h1>RTDB Connection Test</h1>
    <div id="status">Testing...</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDAF1MbAhL2uPIVUGMDlXvCqtknUUCX5Gw",
            authDomain: "nerdfootball.firebaseapp.com",
            databaseURL: "https://nerdfootball-default-rtdb.firebaseio.com",
            projectId: "nerdfootball",
            storageBucket: "nerdfootball.appspot.com",
            messagingSenderId: "969304790725",
            appId: "1:969304790725:web:892df38db0b0e62bde02ac"
        };

        console.log('🔥 Initializing Firebase...');
        const app = initializeApp(firebaseConfig);
        const rtdb = getDatabase(app);
        
        console.log('✅ Firebase RTDB initialized!');
        document.getElementById('status').innerHTML = '✅ Firebase RTDB initialized!';
        
        // Test connection
        const connectedRef = ref(rtdb, '.info/connected');
        onValue(connectedRef, (snapshot) => {
            const connected = snapshot.val() === true;
            console.log('🔗 RTDB Connected:', connected);
            document.getElementById('status').innerHTML = connected ? 
                '🟢 RTDB CONNECTED!' : 
                '🔴 RTDB Disconnected';
        });

        // Test data write/read
        const testRef = ref(rtdb, 'test/connection');
        setTimeout(() => {
            console.log('📝 Testing data write/read...');
            // Note: This will fail due to security rules, but that's expected
        }, 2000);

        window.rtdb = rtdb;
        console.log('🚀 RTDB available globally as window.rtdb');
    </script>
</body>
</html>